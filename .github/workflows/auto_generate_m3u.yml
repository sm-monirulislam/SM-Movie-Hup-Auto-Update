name: "üé¨ Auto Generate Combined Playlist"

on:
  schedule:
    # ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß©‡ß¶ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü‡ßá (UTC ‡¶∏‡¶Æ‡ßü ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ, ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá +6 ‡¶ò‡¶®‡ßç‡¶ü‡¶æ)
    - cron: "0,30 * * * *"
  workflow_dispatch: {}    # ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡ßü‡¶æ‡¶≤‡¶ø ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá

permissions:
  contents: write

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'

      - name: Install dependencies (if any)
        run: |
          pip install --upgrade pip

      - name: Generate Combined Playlist
        run: |
          python3 generate_m3u.py

      - name: Commit & Push Updated Playlist
        run: |
          git config user.name "GitHub Action"
          git config user.email "action@github.com"
          git add combined.m3u
          git diff-index --quiet HEAD || git commit -m "üîÅ Auto-updated combined.m3u"
          git push
